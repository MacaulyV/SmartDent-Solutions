![Descri√ß√£o banner](https://github.com/user-attachments/assets/acf148aa-b44a-4ebd-9085-9ce4f31ecaf0)

# ü¶∑ **SmartDent Solutions**

### ü§ñ **IA Aplicada √† Odontologia**

## üìñ **Sobre o Projeto**

O **SmartDent Solutions** √© uma plataforma baseada em Intelig√™ncia Artificial desenvolvida para a **OdontoPrev**, com o objetivo de **identificar e prevenir sinistros odontol√≥gicos**. O projeto visa reduzir custos e melhorar a experi√™ncia dos benefici√°rios, utilizando IA para analisar padr√µes de uso e comportamento dos pacientes.

### üéØ **Objetivo da Solu√ß√£o**
- Detectar **uso excessivo** dos servi√ßos odontol√≥gicos.  
- Monitorar o **acompanhamento dos pacientes** e identificar aus√™ncias.  
- **Reduzir custos operacionais** da operadora de planos odontol√≥gicos.  
- Melhorar a **qualidade do servi√ßo** prestado aos clientes.

---

## üèó **Vis√£o Geral da Arquitetura da Solu√ß√£o**

A arquitetura do SmartDent Solutions foi projetada para garantir integra√ß√£o eficiente entre seus diversos m√≥dulos, proporcionando escalabilidade e um fluxo de dados otimizado. O sistema √© composto por:

- **Frontend & Mobile (Java Spring MVC, React, React Native)**
- **Backend (.NET - C#)**
- **API de IA (FastAPI + Scikit-learn)**
- **Banco de Dados (Oracle)**
- **Infraestrutura e Deploy (Render, Azure Cloud, Docker, CI/CD)**

Cada componente desempenha um papel essencial na opera√ß√£o do sistema, conforme detalhado abaixo.

---

### üîπ **1. Frontend & Mobile**

#### Frontend (Java Spring MVC + React & JavaScript)

Respons√°vel por oferecer uma interface interativa e intuitiva para operadores e funcion√°rios da OdontoPrev. Suas principais funcionalidades incluem:

- Exibi√ß√£o estruturada dos dados dos pacientes, incluindo gr√°ficos, tabelas e dashboards interativos.  
- Monitoramento detalhado do estado dos pacientes, auxiliando na detec√ß√£o de padr√µes.  
- Integra√ß√£o com a IA, permitindo an√°lises preditivas e gera√ß√£o de relat√≥rios inteligentes.  

#### Aplicativo Mobile (React Native)

Projetado para que os benefici√°rios acompanhem, em tempo real, informa√ß√µes como:

- Hist√≥rico de consultas e procedimentos.  
- Gastos acumulados no plano odontol√≥gico.  
- Recomenda√ß√µes da IA para otimizar o uso do conv√™nio e evitar alertas de uso excessivo.

---

### üîπ **2. Backend (.NET - C#)**

Atua como ponte central do sistema, sendo respons√°vel por:

- Expor endpoints REST para comunica√ß√£o com o Frontend e o Mobile.  
- Capturar, processar e armazenar informa√ß√µes dos usu√°rios e pacientes.  
- Realizar chamadas para a API de IA, enviando os dados necess√°rios para an√°lise.  
- Aplicar as regras de neg√≥cio espec√≠ficas da OdontoPrev e gerenciar o fluxo de dados.

---

### üîπ **3. API de IA (FastAPI + Scikit-learn)**

A API de IA tem um papel fundamental na an√°lise dos dados dos pacientes. Suas fun√ß√µes incluem:

- Pr√©-processamento e infer√™ncia das informa√ß√µes (hist√≥rico de consultas, custos, etc.).  
- Carregamento do modelo de Machine Learning (Random Forest) para avalia√ß√£o de risco.  
- Classifica√ß√£o dos pacientes com base no uso do conv√™nio (ex.: Uso Moderado, Uso Excessivo).  
- Gera√ß√£o de justificativas textuais explicando o motivo da classifica√ß√£o.

Inicialmente, a API de IA est√° hospedada no Render, permitindo acesso pelo Backend .NET via HTTP.

---

### üîπ **4. Banco de Dados (Oracle)**

Respons√°vel pelo armazenamento centralizado de todas as informa√ß√µes do sistema, incluindo:

- Dados dos pacientes e seus hist√≥ricos de consultas e procedimentos.  
- Par√¢metros de neg√≥cio relevantes para a OdontoPrev.  
- Logs de an√°lises e alertas gerados pela IA, garantindo rastreabilidade e auditoria.

---

### üîπ **5. Infraestrutura e Deploy**

#### Deploy Inicial

Atualmente, a API de IA est√° sendo hospedada no Render, permitindo testes e ajustes iniciais.

#### Fase Final de Deploy

O plano √© migrar toda a infraestrutura para a Azure Cloud, utilizando:

- Docker para containeriza√ß√£o dos servi√ßos.  
- Reposit√≥rios e pipelines CI/CD para automa√ß√£o de deploys e atualiza√ß√µes.

---

## üèó **Diagrama da Arquitetura**

![Descri√ß√£o banner](https://github.com/user-attachments/assets/2f15db1a-d6bf-44f3-a7d1-da50122ae3fe)

### Descri√ß√£o L√≥gica do Fluxo da Arquitetura

1. **Intera√ß√£o do Usu√°rio:**  
   Usu√°rios acessam o sistema atrav√©s do frontend web ou do aplicativo m√≥vel.

2. **Comunica√ß√£o com a API Central:**  
   Tanto o frontend quanto o mobile enviam requisi√ß√µes HTTP para a API central implementada em .NET, que processa as informa√ß√µes e aplica as regras de neg√≥cio.

3. **Chamada √† API de IA:**  
   Quando necess√°rio, a API central realiza chamadas √† API de IA (desenvolvida com FastAPI e Scikit-learn) para obter an√°lises de risco e justificativas.

4. **Persist√™ncia dos Dados:**  
   Os dados processados, incluindo logs e an√°lises, s√£o armazenados no banco de dados Oracle para garantir rastreabilidade e integridade.

5. **Infraestrutura e Deploy:**  
   Toda a solu√ß√£o √© implantada em uma infraestrutura robusta como (Azure Cloud, Docker, CI/CD), garantindo escalabilidade, facilidade de manuten√ß√£o e atualiza√ß√µes cont√≠nuas.

> **Nota Importante:**  
> Esta vis√£o da arquitetura representa o planejamento final previsto para a Sprint 4 e n√£o reflete completamente a implementa√ß√£o atual.

---

## üìà **Evolu√ß√£o entre as Entregas**

A seguir, detalhamos a evolu√ß√£o do projeto ao longo das Sprints, destacando as principais decis√µes, desafios e avan√ßos realizados em cada etapa.

---

### üöÄ **Sprint 1 ‚Äì Planejamento e Defini√ß√£o da Arquitetura**

Na primeira sprint, o foco foi discutir e definir a solu√ß√£o em equipe. Principais atividades realizadas:

- Defini√ß√£o da arquitetura geral do sistema e das tecnologias a serem utilizadas.  
- Discuss√£o sobre a integra√ß√£o dos modelos de IA na plataforma.  
- Decis√£o inicial de que haveriam tr√™s modelos diferentes de IA, cada um respons√°vel por uma funcionalidade espec√≠fica.  
- Sem desenvolvimento pr√°tico, apenas planejamento e estrutura√ß√£o da ideia.

---

### üõ† **Sprint 2 ‚Äì In√≠cio do Desenvolvimento e Primeiros Testes**

Nesta fase, come√ßamos a implementa√ß√£o das primeiras partes do projeto. Principais marcos:

- Desenvolvimento inicial da API em C# (.NET) e Java, testando qual abordagem seria mais eficiente.  
- A princ√≠pio, o plano era construir todo o sistema em Java (Backend e Frontend), mas mudamos essa decis√£o durante a sprint seguinte.  
- Primeiro prot√≥tipo do modelo de IA para detec√ß√£o de uso excessivo, por√©m ainda sem treinamento real e sem integra√ß√£o via API.  
- Estrutura√ß√£o da API Fast ainda incompleta, pois precis√°vamos finalizar a base do sistema para entender como o modelo de IA receberia requisi√ß√µes HTTP e retornaria an√°lises.

---

### üîÑ **Sprint 3 ‚Äì Defini√ß√£o Final e Integra√ß√£o das Solu√ß√µes**

Neste est√°gio, consolidamos a arquitetura e fizemos ajustes importantes:

- Decis√£o definitiva sobre a estrutura do sistema, garantindo alinhamento com a implementa√ß√£o real.  
- Revis√£o do plano original de IA: em vez de tr√™s modelos distintos, passamos a utilizar apenas dois:  
  - Modelo √∫nico para an√°lise de padr√µes de uso e acompanhamento dos pacientes, garantindo maior efici√™ncia e integra√ß√£o entre essas funcionalidades.  
  - Modelo separado para o aplicativo mobile, que funciona de maneira complementar, ajudando os pacientes a evitar alertas de uso excessivo e oferecendo recomenda√ß√µes personalizadas.  
- Finaliza√ß√£o da estrutura de dados no Oracle.  
- API Central (.NET) praticamente conclu√≠da, com endpoints definidos e prontos para integra√ß√£o.  
- Treinamento e integra√ß√£o do modelo de IA via FastAPI, permitindo comunica√ß√£o entre a IA e a API Central em C#.  
- In√≠cio do desenvolvimento do aplicativo mobile e da interface do sistema, que consumir√° as APIs, com previs√£o de conclus√£o at√© Sprint 4.

---

## ü§î **Considera√ß√µes Finais e Problemas Enfrentados**

Durante a Sprint 3 do projeto, foi necess√°rio adaptar e reformular diversas partes da solu√ß√£o para atender tanto √†s novas exig√™ncias quanto √† evolu√ß√£o das entregas. Esse processo envolveu a reestrutura√ß√£o do pipeline de an√°lise de uso odontol√≥gico, principalmente na integra√ß√£o entre a API em C# e o m√≥dulo de IA. A seguir, destacam-se os principais pontos e desafios:

---

### ‚öôÔ∏è **Adapta√ß√£o do Modelo de An√°lise**

**Evolu√ß√£o do Conceito:**  
Inicialmente, a abordagem adotada era puramente heur√≠stica, baseada em regras pr√©-definidas (como a quantidade de consultas realizadas e intervalos entre elas) para classificar o risco do paciente.

**Hibridiza√ß√£o da L√≥gica:**  
Ap√≥s revisarmos os requisitos e entendermos melhor as necessidades do projeto, optamos por uma abordagem h√≠brida. Essa nova estrat√©gia combina a predi√ß√£o de um modelo treinado (usando t√©cnicas de Machine Learning, como RandomForest) com a gera√ß√£o de justificativas por meio de templates. Essa combina√ß√£o permitiu capturar nuances dos dados hist√≥ricos e, ao mesmo tempo, fornecer respostas em linguagem natural e detalhadas para cada paciente.

---

### üîç **Problemas com o Tratamento dos Dados**

**Formato dos Dados:**  
Um dos grandes desafios foi lidar com a variedade de formatos presentes no JSON de entrada, especialmente no que tange aos valores monet√°rios (ex.: "R$ 860,00") e datas. Foi necess√°rio desenvolver fun√ß√µes espec√≠ficas para limpar e converter esses dados (por exemplo, converter o custo para n√∫mero e formatar as datas para o padr√£o %d/%m/%Y %H:%M).

**Extra√ß√£o de Features:**  
A defini√ß√£o das features corretas para treinar o modelo tamb√©m exigiu ajustes. Tivemos que alinhar as colunas do CSV de treinamento com os dados extra√≠dos do JSON, garantindo que contagens por categoria (como "count_ConsultaseDiagn√≥stico" ou "count_Preven√ß√£oeProfilaxia") fossem calculadas de forma consistente.

---

### üîó **Integra√ß√£o entre M√≥dulos**

**Conex√£o com a API em C#:**  
O desenvolvimento da API da IA teve como objetivo final ser integrada com a API em C#. Durante o desenvolvimento, surgiram desafios relativos √† padroniza√ß√£o do formato de entrada e sa√≠da dos dados, bem como √† comunica√ß√£o entre os m√≥dulos, que foram resolvidos atrav√©s da utiliza√ß√£o do FastAPI e de esquemas Pydantic para garantir a consist√™ncia dos dados.

**Testes Locais e Valida√ß√£o:**  
Foram realizados extensos testes locais (utilizando o Swagger UI do FastAPI e scripts de teste) para validar a l√≥gica de infer√™ncia e garantir que tanto a entrada de um √∫nico paciente quanto de m√∫ltiplos fossem processadas corretamente.

---

### ‚úÖ **Conclus√£o**

A Sprint 3 foi marcada por uma significativa evolu√ß√£o no desenvolvimento do projeto, onde desafios de integra√ß√£o, padroniza√ß√£o de dados e a defini√ß√£o de uma abordagem h√≠brida foram superados. Essa nova estrat√©gia n√£o s√≥ permitiu capturar padr√µes mais sutis nos dados por meio do modelo treinado, como tamb√©m garantiu a gera√ß√£o de justificativas detalhadas e naturalizadas, proporcionando uma an√°lise robusta e de f√°cil entendimento para os usu√°rios finais.

Apesar das dificuldades iniciais, as li√ß√µes aprendidas durante essa fase fortaleceram o projeto, preparando-o para a pr√≥xima etapa de integra√ß√£o com das APIs com √°s interfaces.

## ‚ôªÔ∏è Refatora√ß√£o e Organiza√ß√£o do C√≥digo

Durante o desenvolvimento da API **SmartDentAI**, a estrutura foi organizada para garantir modularidade, clareza e facilitar futuras manuten√ß√µes. A separa√ß√£o em diferentes diret√≥rios mant√©m **treinamento**, **infer√™ncia** e **pr√©-processamento** bem delimitados.

### üìÇ Estrutura dos Arquivos
Abaixo est√° a organiza√ß√£o atual do projeto, refletindo a separa√ß√£o de responsabilidades:

- **`api/`**  
  - `main.py`  
    Arquivo principal da API em **FastAPI**, respons√°vel pela infer√™ncia do modelo e exposi√ß√£o dos endpoints.

- **`data/`**  
  - `dataset_treino.csv`  
    Base de dados utilizada para treinar o modelo.  
  - `synthetic_patients.json`  
    Dados sint√©ticos gerados para teste e valida√ß√£o.

- **`model/`**  
  - **`artifacts/`**  
    - `model_rf.joblib`  
      Arquivo do modelo Random Forest salvo ap√≥s o treinamento.  
  - **`preprocessing/`**  
    - `prepare_dataset.py`  
      Script para limpar e preparar o dataset antes do treinamento.  
  - **`training/`**  
    - `train_model.py`  
      Script respons√°vel por treinar o modelo e salv√°-lo em `artifacts/`.

- **`scripts/`**  
  - `generate_synthetic_data.py`  
    Script auxiliar para gerar dados sint√©ticos de pacientes, ajudando nos testes.

### üìù Documenta√ß√£o e Logs

Foi fundamental garantir que o comportamento do modelo pudesse ser monitorado:

- Adicionamos **logs detalhados** para indicar quando o modelo foi carregado corretamente e para relatar poss√≠veis falhas.
- Inclu√≠mos o campo **"modelo_utilizado"** nas respostas da API, permitindo identificar de forma clara se a predi√ß√£o foi feita pelo modelo treinado.

Essas medidas facilitam identificar rapidamente qualquer problema na infer√™ncia e manter o modelo operando corretamente em produ√ß√£o.

---

## üß† **Arquitetura de IA**

No SmartDent Solutions, optamos por usar FastAPI (Python) como camada de servi√ßo de IA, onde rodamos o modelo de Machine Learning. Esse modelo foi constru√≠do em Scikit-learn, e usamos um Random Forest porque ele lida bem com diferentes tipos de dados (como n√∫mero de consultas, custo total, hist√≥rico de procedimentos) e oferece resultados interpret√°veis.

A raz√£o para escolher essa arquitetura √© que a API de IA fica independente do restante do sistema (ou seja, separada do backend .NET e do front-end Java/Mobile). Assim, quando a gente precisa atualizar o modelo ou adicionar alguma l√≥gica de an√°lise nova, n√£o mexemos no c√≥digo do backend principal. Isso deixa tudo mais modular e facilita o deploy de forma independente‚Äîno caso, a API de IA est√° sendo hospedada no Render.

---

## ‚öôÔ∏è **Implementa√ß√£o na Pr√°tica**

No reposit√≥rio, h√° uma pasta espec√≠fica (chamada algo como `api/` ou `IA/`) que cont√©m os scripts de treinamento e o c√≥digo da API em FastAPI. A gente treina o modelo localmente (ou num ambiente de dados), salva o arquivo `.joblib`, e a API carrega esse modelo quando inicia. Sempre que o backend .NET recebe alguma informa√ß√£o de um paciente para ser analisada, ele faz uma requisi√ß√£o POST para o endpoint do FastAPI, que ent√£o processa os dados, aplica o modelo e retorna um r√≥tulo de risco (por exemplo, "UsoExcessivo") mais uma justificativa.

---

### üóÇ **Base de Dados Usada**

Para o treinamento e teste do modelo, n√≥s estamos trabalhando com dados sint√©ticos que refletem cen√°rios de uso odontol√≥gico (quantidade de consultas, custo, status de cada consulta, tipo de procedimento, etc.). A ideia √© simular comportamentos de pacientes abusando ou n√£o do conv√™nio, pra conseguirmos treinar a IA a distinguir entre uso normal e uso excessivo. Esses dados foram gerados num script Python que cria registros aleat√≥rios com diferentes padr√µes de frequ√™ncia e custo. Assim, a IA aprende com uma variedade de cen√°rios que representam bem o que acontece no dia a dia de um plano odontol√≥gico.

#### Por que dados sint√©ticos?
Porque no momento n√£o temos acesso a dados reais (que por quest√µes de privacidade e compliance n√£o podem ser usados livremente). Mesmo assim, essa base sint√©tica √© suficiente para a prova de conceito e pra demonstrar como a IA seria integrada no fluxo real.

---

## üé• **Demonstra√ß√£o e Apresenta√ß√£o**

- *(Inserir link para um v√≠deo demonstrativo do projeto funcionando.)*  
- *(Adicionar imagens mostrando a API em funcionamento, chamadas ao endpoint e exemplos de resposta.)*

---

## üßë‚Äçüíª **Equipe de Desenvolvimento**

- **Macauly V.** *(L√≠der do Projeto, IA & Backend)*  
- **[Nome do Integrante]** *(Mobile Developer)*  
- **[Nome do Integrante]** *(Banco de Dados & Infraestrutura)*  
- **[Nome do Integrante]** *(Frontend & UX/UI)*
